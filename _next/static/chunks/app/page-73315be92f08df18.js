(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{449:(e,t,l)=>{Promise.resolve().then(l.bind(l,5295))},5295:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>p});var n=l(5155),a=l(2115);let r=(e,t)=>{(0,a.useEffect)(()=>{let l=l=>{!(document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||document.activeElement instanceof HTMLSelectElement)&&(l.key===e||l.key.toLowerCase()===e)&&t()};return document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}},[e,t])},s=e=>{let{audioFiles:t,onSelectAudio:l,currentAudioUrl:s}=e,[o,i]=(0,a.useState)("h-20");return r("x",()=>{i(e=>"h-20"===e?"h-100":"h-20")}),(0,n.jsx)("div",{className:"".concat(o," overflow-y-auto rounded-md p-1 transition-all duration-300"),children:(0,n.jsx)("ul",{className:"list-none mt-3",children:t.map((e,t)=>{let a=e.url===s;return(0,n.jsx)("li",{onClick:()=>l(e.url),className:"cursor-pointer text-md py-1 px-1 mb-1 rounded-md transition-colors duration-200 ".concat(a?"font-bold text-[#a7f5e5]":"font-bold text-white hover:bg-[#9BB5DF]"),children:e.title},t)})})})};var o=l(9757),i=l(5055);let c=e=>{let{onSearch:t}=e,[l,r]=(0,a.useState)("");return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:"text",placeholder:"Look for it...",value:l,onChange:e=>{let l=e.target.value;r(l),t(l)},className:"w-full p-2 rounded-md bg-[#7A9ACE] font-semibold text-white focus:outline-none"}),(0,n.jsx)(o.g,{icon:i.MjD,className:"absolute right-3 top-3 text-white"})]})},u=e=>{let t=(0,a.useRef)(null),[l,n]=(0,a.useState)(!1),[r,s]=(0,a.useState)(!1),[o,i]=(0,a.useState)(0),[c,u]=(0,a.useState)(0);return(0,a.useEffect)(()=>{t.current&&e&&(t.current.src=e,i(0))},[e]),{audioRef:t,isPlaying:l,isMuted:r,togglePlay:()=>{t.current&&(l?t.current.pause():t.current.play().catch(e=>console.error("Playback error:",e)),n(!l))},toggleMute:()=>{t.current&&(t.current.muted=!r,s(!r))},handleSeek:e=>{if(!t.current)return;let l=parseFloat(e.target.value);t.current.currentTime=l,i(l)},currentTime:o,duration:c,handleTimeUpdate:()=>{t.current&&i(t.current.currentTime)},handleLoadedMetadata:()=>{t.current&&u(t.current.duration)}}},d=e=>{let t=Math.floor(e/60),l=Math.floor(e%60);return"".concat(t,":").concat(l<10?"0":"").concat(l)};function x(e){let{audioUrl:t,title:l,onNext:a,onPrevious:s}=e,{audioRef:c,isPlaying:x,isMuted:m,togglePlay:h,toggleMute:f,handleSeek:g,currentTime:j,duration:v,handleTimeUpdate:p,handleLoadedMetadata:b}=u(t);return(r(" ",h),r("m",f),t)?(0,n.jsxs)("div",{className:"flex flex-col items-center p-4 bg-[#7A9ACE] rounded-md space-y-4",children:[(0,n.jsx)("audio",{ref:c,autoPlay:!0,onTimeUpdate:p,onLoadedMetadata:b,onPlay:()=>{},onPause:()=>{},onEnded:a,className:"hidden"}),(0,n.jsxs)("div",{className:"flex items-center justify-between w-full mb-4",children:[(0,n.jsx)("button",{onClick:s,className:"text-white hover:text-gray-300",children:(0,n.jsx)(o.g,{icon:i.TH3,size:"lg"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,n.jsx)("span",{className:"text-white text-md font-semibold",children:l}),(0,n.jsxs)("span",{className:"text-gray-300 text-sm",children:[d(j)," / ",d(v)]})]}),(0,n.jsx)("button",{onClick:a,className:"text-white hover:text-gray-300",children:(0,n.jsx)(o.g,{icon:i.vFJ,size:"lg"})})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-4 w-full",children:[(0,n.jsx)("button",{onClick:h,className:"text-white hover:text-gray-300",children:x?(0,n.jsx)(o.g,{icon:i.G1Y,size:"lg"}):(0,n.jsx)(o.g,{icon:i.ijD,size:"lg"})}),(0,n.jsx)("input",{type:"range",min:0,max:v,value:j,onChange:g,className:"w-full accent-[#64748B]"}),(0,n.jsx)("button",{onClick:f,className:"text-white hover:text-gray-300",children:(0,n.jsx)(o.g,{icon:m?i.PKk:i.jY_,size:"lg"})})]})]}):(0,n.jsx)("div",{className:"text-gray-400",children:"Select an audio file to play"})}let m=e=>{let[t,l]=(0,a.useState)(e);return{filteredFiles:t.length?t:e,handleSearch:t=>{""===t.trim()?l(e):l(e.filter(e=>e.title.toLowerCase().includes(t.toLowerCase())))}}},h=e=>{let[t,l]=(0,a.useState)(e),[n,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{n?l(e=>[...e].sort(()=>.5-Math.random())):l(e)},[e,n]),{shuffledFiles:t,isShuffled:n,setIsShuffled:r}},f=e=>{let{audioFiles:t}=e,[l,r]=(0,a.useState)(0),{filteredFiles:o,handleSearch:i}=m(t),{shuffledFiles:u,isShuffled:d,setIsShuffled:f}=h(t),[g,j]=(0,a.useState)(t[0]);(0,a.useEffect)(()=>{if(o.length>0&&g&&!o.find(e=>e.url===g.url))return},[o,g]),(0,a.useEffect)(()=>{t.length>0&&!g&&j(t[0])},[t,g]);let v=e=>{let t;t=d?Math.floor(Math.random()*o.length):"next"===e?(l+1)%o.length:(l-1+o.length)%o.length,j(o[t]),r(t)};return t.length?(0,n.jsxs)("div",{className:"p-2 flex flex-col space-y-4 w-full max-w-xl h-full",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold text-[#E2E8F0]",children:"mp3"}),(0,n.jsx)("button",{onClick:()=>{f(e=>!e),r(0)},className:"text-sm px-3 py-1 bg-[#7A9ACE] text-[#E2E8F0] rounded-md",children:(0,n.jsxs)("div",{className:"font-bold",children:["Shuffle: ",d?"On":"Off"]})})]}),(0,n.jsx)(c,{onSearch:i}),(0,n.jsx)(s,{audioFiles:d?u:o,currentAudioUrl:(null==g?void 0:g.url)||null,onSelectAudio:e=>{let t=o.find(t=>t.url===e);t&&(j(t),r(o.indexOf(t)))}}),(0,n.jsx)(x,{audioUrl:(null==g?void 0:g.url)||null,title:(null==g?void 0:g.title)||"",onNext:()=>v("next"),onPrevious:()=>v("previous")})]}):(0,n.jsx)("div",{children:"No audio files available"})},g="/mousike",j="".concat(g,"/audio/manifest.json"),v="".concat(g,"/images/lofi.jpg"),p=()=>{let[e,t]=(0,a.useState)([]),[l,s]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch(j);if(!e.ok)throw Error("Failed to fetch audio manifest");let l=(await e.json()).files.map(e=>({title:e.replace(".mp3",""),url:"".concat(g,"/audio/").concat(e)}));t(l)}catch(e){console.error("Error loading audio files:",e)}})()},[]),r("z",()=>{s(e=>!e)}),(0,n.jsx)("main",{className:"h-screen w-screen flex items-center justify-center p-6 relative transition-all duration-500 bg-[#2e2222] text-[#f0d9b5]",style:{backgroundImage:"url(".concat(v,")"),backgroundSize:"cover",backgroundPosition:"center"},children:(0,n.jsx)("div",{className:"fixed top-10 right-10 p-4 rounded-lg shadow-lg w-96 backdrop-blur-md bg-[#9BB5DF]/60 border border-[#9BB5DF] audio-container ".concat(l?"":"hidden"),children:(0,n.jsx)(f,{audioFiles:e})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[266,757,441,587,358],()=>t(449)),_N_E=e.O()}]);